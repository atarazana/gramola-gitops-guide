= Prepare Cluster
include::_attributes.adoc[]

Everything we do in this section requires that you have fulfilled the xref:01-setup.adoc#prerequisite[prerequisites] section and you're logged in your OpenShift cluster.

[WARNING]
====
*EVEN* if you have two clusters and want to run the multicluster section... so... *log in the main one now* [.underline]#not in the secondary#.
====

So if not already logged in, please do it now.

[source,sh, subs="+macros,+attributes"]
----
oc login -u {username} -p {password} --server=https://api.{api-domain}
----

[#install-operators]
== Installing ArgoCD and Pipelines using the operators

In order to run this guide we're going to need several components, more prominently:

- *ArgoCD*, the GitOps engine supported by Red Hat through the *OpenShift GitOps operator*
- *Tekton*, the _de facto_ kubernetes native CICD pipelines system supported by Red Hat through the *OpenShift Pipelines operator*

Install *ArgoCD* (with OpenShift OAuth configured) and *Tekton*:

[.console-input]
[source,bash, subs="+macros,+attributes"]
----
until kubectl apply -k util/bootstrap/; do sleep 2; done
----

[#high-level-tests]
== High level tests

Let's open the OpenShift Web Console and run some validation tests.

Open this link: https://{openshift-console-host}[^]

You should see something like.

NOTE: You can skip the tour or run it if you want and have time.

image::openshift-console.png[OpenShift Web Console]

Now, take a look to the next picture, there are two arrows pointing to:

- The ArgoCD web console link
- The Pipelines section

image::argocd-pipelines-test-1.png[High level tests 1]

You can see both then we're on the good way.

Open the ArgoCD web console then click on the "LOG IN VIA OPENSHIFT" button on the upper right corner and use your credentials:

NOTE: The first time you successfully log in you'll see an Authorize Access request, leave it "as is"  and click on the button that says "Allow selected permissions"

image::argocd-login.png[ArgoCD Log In]

Finally if all went well you should land in the ArgoCD console and see this.

image::argocd-console.png[ArgoCD Console]


